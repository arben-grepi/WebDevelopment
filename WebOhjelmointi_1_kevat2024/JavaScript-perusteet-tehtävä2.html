<!DOCTYPE html>
<html lang="fi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Palindromi-tehtävän suorittaminen</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <style>
      /* CSS-muotoilu kopioitavalle koodille */
      #code-container {
        background-color: #f8f9fa;
        border: 1px solid #ced4da;
        border-radius: 5px;
        padding: 10px;
        margin-top: 20px;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <div class="container mt-5">
      <h1>Puhelinluettelotehtävä</h1>

      <h2>Suorita tehtävä selaimen konsolissa</h2>
      <p>
        Kopioi alla oleva JavaScript-koodi ja liitä se selaimen konsoliin. Paina
        sitten Enter suorittaaksesi tehtävän.
      </p>

      <button
        class="btn btn-primary mb-3"
        id="blinkButton"
        onclick="kopioiKoodi()"
      >
        Kopioi koodi leikepöydälle
      </button>

      <!-- Div laatikko kopioitavalle koodille -->
      <div id="code-container">
        <pre><code id="copyable-code"
>let puhelinluettelo = {
  lista: [],
  lisaaYhteystieto: function (nimi, puhelin) {
    let yhteystieto = {
      nimi: nimi,
      puh: puhelin,
    };
    this.lista.push(yhteystieto);
  },
  haeYhteystieto: function (keyword) {
    const result = this.lista.filter((obj) =>
      Object.values(obj).some((value) => value.includes(keyword))
    );
    if (result == []) return "ei löydy";
    else return result;
  },
};

let valinta = "";

while (valinta != 4) {
  valinta = prompt(
    "\nLisaa yhteystieto puh. luetteloon: 1 \n" +
      "Hae yhteystieto  puh. luettelosta: 2 \n" +
      "Tulosta puhelinluettelo:           3 \n" +
      "Lopeta ohjelma:                    4\n"
  );
  switch (valinta) {
    case "4":
      break;
    case "3":
      puhelinluettelo.lista.forEach((element) => {
        console.log(element);
      });
      break;
    case "2":
      let hakusana = prompt("Anna hakusana: ");
      console.log(puhelinluettelo.haeYhteystieto(hakusana));
      break;
    case "1":
      let nimi = prompt("Anna nimi: ");
      let puh = prompt("Anna puh: ");
      puhelinluettelo.lisaaYhteystieto(nimi, puh);
      puhelinluettelo.lista.forEach((element) => {
        console.log(element);
      });
  }
}</code></pre>
      </div>
      <div>
        <a href="mitaOpinT2.html" class="btn btn-primary mt-3"
          >Mitä opin tehtävästä?</a
        >
      </div>

      <!-- Palaa takaisin index.html -sivulle nappi -->
      <a href="index.html" class="btn btn-secondary mt-3">Palaa takaisin</a>
    </div>

    <script>
      function kopioiKoodi() {
        const koodi = document.getElementById("copyable-code").innerText;
        navigator.clipboard.writeText(koodi).then(
          function () {
            flickr();
          },
          function (err) {
            console.error("Koodin kopiointi epäonnistui: ", err);
          }
        );
      }
      function flickr() {
        var button = document.getElementById("blinkButton");
        var intervalId = setInterval(function () {
          button.style.visibility =
            button.style.visibility == "hidden" ? "visible" : "hidden";
        }, 100); // Adjust the interval time (100ms in this example)

        // Stop flickering after some time (e.g., 3000ms)
        setTimeout(function () {
          clearInterval(intervalId);
          button.style.visibility = "visible"; // Ensure the button is visible after flickering stops
        }, 500); // Adjust the duration (500ms in this example)
      }
    </script>
  </body>
</html>
